<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Summaries</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#1e293b',
                        accent: '#f97316',
                    }
                }
            }
        }
    </script>
    <style>
        .book-card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .chapter-item {
            transition: all 0.3s ease;
            border-left: 3px solid #3b82f6;
        }

        .chapter-item:hover {
            background-color: #f1f5f9;
            border-left-width: 5px;
        }

        .chapter-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .chapter-content.active {
            max-height: 1000px;
        }

        .placeholder-cover {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">
    <!-- Navigation -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-primary flex items-center">
                <i class="fas fa-book-open mr-2"></i> BookSummaries
            </a>
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="Search books..."
                        class="px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                    <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
                </div>
                <button id="themeToggle" class="p-2 rounded-full bg-gray-200 hover:bg-gray-300">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Homepage -->
        <section id="homePage" class="py-12">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h1 class="text-4xl font-bold text-secondary mb-4">Discover Book Summaries</h1>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Explore key insights from popular books. Save
                        time while gaining valuable knowledge from the world's best authors.</p>
                </div>

                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-secondary">All Books</h2>
                    <div>
                        <span class="text-gray-600 mr-2">Filter:</span>
                        <select id="filterSelect"
                            class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            <option value="all">All Books</option>
                            <option value="business">Business</option>
                            <option value="psychology">Psychology</option>
                            <option value="self-help">Self-Help</option>
                            <option value="productivity">Productivity</option>
                        </select>
                    </div>
                </div>

                <div id="bookList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Books will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Book Detail Page (initially hidden) -->
        <section id="bookDetailPage" class="py-12 hidden">
            <div class="container mx-auto px-4 max-w-4xl">
                <button id="backButton" class="mb-6 flex items-center text-primary hover:text-primary-dark font-medium">
                    <i class="fas fa-arrow-left mr-2"></i> Back to All Books
                </button>

                <div id="bookDetail" class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <!-- Book details will be dynamically loaded here -->
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-secondary mb-6">Book Chapters</h2>
                    <div id="chaptersList">
                        <!-- Chapters will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-secondary text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">BookSummaries &copy; 2023 - All Rights Reserved</p>
            <p class="text-gray-400">Discover the essence of great books in minutes</p>
        </div>
    </footer>

    <!-- Data File -->
    <script id="bookData" type="application/json">
        {
            "books": [
                {
                    "id": 1,
                    "title": "Atomic Habits",
                    "author": "James Clear",
                    "description": "An easy & proven way to build good habits & break bad ones. Tiny changes, remarkable results.",
                    "category": "self-help",
                    "cover": "atomic-habits.jpg",
                    "chapters": [
                        {
                            "title": "The Surprising Power of Atomic Habits",
                            "summary": [
                                "Habits are the compound interest of self-improvement",
                                "Small changes seem insignificant but deliver remarkable results over time",
                                "Focus on systems rather than goals for long-term improvement"
                            ]
                        },
                        {
                            "title": "How Your Habits Shape Your Identity",
                            "summary": [
                                "True behavior change is identity change",
                                "Focus on who you wish to become, not just what you want to achieve",
                                "Every action is a vote for the type of person you wish to become"
                            ]
                        },
                        {
                            "title": "How to Build Better Habits in 4 Simple Steps",
                            "summary": [
                                "The Four Laws of Behavior Change: make it obvious, attractive, easy, satisfying",
                                "Create implementation intentions: \"I will [BEHAVIOR] at [TIME] in [LOCATION]\"",
                                "Use habit stacking: \"After [CURRENT HABIT], I will [NEW HABIT]\""
                            ]
                        }
                    ]
                },
                {
                    "id": 2,
                    "title": "Deep Work",
                    "author": "Cal Newport",
                    "description": "Rules for focused success in a distracted world. Learn how to cultivate deep work for professional success.",
                    "category": "productivity",
                    "cover": "deep-work.jpg",
                    "chapters": [
                        {
                            "title": "Deep Work is Valuable",
                            "summary": "In our increasingly competitive economy, the ability to perform deep work is becoming increasingly rare at exactly the same time it is becoming increasingly valuable. As a consequence, the few who cultivate this skill will thrive."
                        },
                        {
                            "title": "Deep Work is Rare",
                            "summary": [
                                "The metric black hole: Difficulty measuring the value of deep work",
                                "The principle of least resistance: People tend toward behaviors that are easiest",
                                "Busyness as proxy for productivity: Visible activity becomes more valued than the actual productivity"
                            ]
                        },
                        {
                            "title": "Deep Work is Meaningful",
                            "summary": "A deep life is not just economically lucrative, but also a life well lived. The skillful management of attention is the sine qua non of the good life and the key to improving virtually every aspect of your experience."
                        }
                    ]
                },
                {
                    "id": 3,
                    "title": "Thinking, Fast and Slow",
                    "author": "Daniel Kahneman",
                    "description": "The groundbreaking work by Nobel Prize winner Daniel Kahneman on behavioral psychology.",
                    "category": "psychology",
                    "cover": "",
                    "chapters": [
                        {
                            "title": "The Characters of the Story",
                            "summary": "Kahneman introduces two systems that drive the way we think. System 1 is fast, intuitive, and emotional; System 2 is slower, more deliberative, and more logical."
                        },
                        {
                            "title": "Attention and Effort",
                            "summary": [
                                "System 2 requires attention and is disrupted when attention is drawn away",
                                "Effort is required to maintain multiple ideas in mind simultaneously",
                                "Self-control requires attention and effort"
                            ]
                        },
                        {
                            "title": "The Lazy Controller",
                            "summary": "System 2 is lazy and often accepts what System 1 tells it. Many of us are often overconfident in our intuitions and prone to place too much faith in our gut feelings."
                        }
                    ]
                },
                {
                    "id": 4,
                    "title": "The Lean Startup",
                    "author": "Eric Ries",
                    "description": "How today's entrepreneurs use continuous innovation to create radically successful businesses.",
                    "category": "business",
                    "cover": "lean-startup.jpg",
                    "chapters": [
                        {
                            "title": "Start",
                            "summary": [
                                "Entrepreneurs are everywhere - not just in garages",
                                "Entrepreneurship is management - it requires a new kind of management",
                                "Validated learning - startups exist to learn how to build a sustainable business"
                            ]
                        },
                        {
                            "title": "Steer",
                            "summary": "The Build-Measure-Learn feedback loop is at the core of the Lean Startup model. The goal is not to create a perfect plan but to accelerate this feedback loop."
                        },
                        {
                            "title": "Accelerate",
                            "summary": "Sustainable growth can be achieved through four primary ways: word of mouth, as a side effect of product usage, through funded advertising, and through repeat purchases."
                        }
                    ]
                }
            ]
        }
    </script>

    <!-- JavaScript -->
    <script>
        // Load book data from the embedded JSON
        const bookData = JSON.parse(document.getElementById('bookData').textContent);

        // DOM elements
        const homePage = document.getElementById('homePage');
        const bookDetailPage = document.getElementById('bookDetailPage');
        const bookList = document.getElementById('bookList');
        const bookDetail = document.getElementById('bookDetail');
        const chaptersList = document.getElementById('chaptersList');
        const backButton = document.getElementById('backButton');
        const searchInput = document.getElementById('searchInput');
        const filterSelect = document.getElementById('filterSelect');
        const themeToggle = document.getElementById('themeToggle');

        // State
        let currentBookId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            renderBookList(bookData.books);

            // Event listeners
            backButton.addEventListener('click', showHomePage);
            searchInput.addEventListener('input', handleSearch);
            filterSelect.addEventListener('change', handleFilter);
            themeToggle.addEventListener('click', toggleDarkMode);

            // Check if we're opening a specific book from URL
            const urlParams = new URLSearchParams(window.location.search);
            const bookId = urlParams.get('book');
            if (bookId) {
                showBookDetail(parseInt(bookId));
            }
        });

        // Render book list
        function renderBookList(books) {
            bookList.innerHTML = '';

            if (books.length === 0) {
                bookList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-book-open text-5xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-600">No books found</h3>
                        <p class="text-gray-500">Try adjusting your search or filter</p>
                    </div>
                `;
                return;
            }

            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl';
                bookCard.innerHTML = `
                    <div class="h-48 overflow-hidden ${book.cover ? '' : 'placeholder-cover flex items-center justify-center'}">
                        ${book.cover ?
                        `<img src="${book.cover}" alt="${book.title}" class="w-full h-full object-cover">` :
                        `<i class="fas fa-book text-5xl text-gray-400"></i>`
                    }
                    </div>
                    <div class="p-6">
                        <span class="inline-block px-3 py-1 text-xs font-semibold text-accent bg-orange-100 rounded-full mb-2">
                            ${book.category}
                        </span>
                        <h3 class="text-xl font-bold text-secondary mb-2">${book.title}</h3>
                        <p class="text-gray-600 mb-3">by ${book.author}</p>
                        <p class="text-gray-700 mb-4 line-clamp-3">${book.description}</p>
                        <button onclick="showBookDetail(${book.id})" class="w-full mt-2 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center justify-center">
                            View Chapters <i class="fas fa-arrow-right ml-2 text-sm"></i>
                        </button>
                    </div>
                `;
                bookList.appendChild(bookCard);
            });
        }

        // Show book detail page
        function showBookDetail(bookId) {
            const book = bookData.books.find(b => b.id === bookId);
            if (!book) return;

            currentBookId = bookId;

            // Update URL
            window.history.pushState(null, '', `?book=${bookId}`);

            // Render book details
            bookDetail.innerHTML = `
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-1/3">
                        <div class="h-64 ${book.cover ? '' : 'placeholder-cover flex items-center justify-center'} rounded-lg overflow-hidden">
                            ${book.cover ?
                    `<img src="${book.cover}" alt="${book.title}" class="w-full h-full object-cover">` :
                    `<i class="fas fa-book text-8xl text-gray-400"></i>`
                }
                        </div>
                    </div>
                    <div class="md:w-2/3">
                        <span class="inline-block px-3 py-1 text-xs font-semibold text-accent bg-orange-100 rounded-full mb-3">
                            ${book.category}
                        </span>
                        <h1 class="text-3xl font-bold text-secondary mb-2">${book.title}</h1>
                        <p class="text-xl text-gray-600 mb-4">by ${book.author}</p>
                        <p class="text-gray-700 mb-6">${book.description}</p>
                        <div class="flex items-center text-gray-500">
                            <i class="fas fa-list mr-2"></i>
                            <span>${book.chapters.length} chapters</span>
                        </div>
                    </div>
                </div>
            `;

            // Render chapters
            chaptersList.innerHTML = '';
            book.chapters.forEach((chapter, index) => {
                const chapterItem = document.createElement('div');
                chapterItem.className = 'chapter-item bg-white mb-4 rounded-lg p-5 shadow-sm hover:shadow-md';
                chapterItem.innerHTML = `
                    <div class="flex justify-between items-center cursor-pointer" onclick="toggleChapter(this)">
                        <div>
                            <span class="text-sm font-semibold text-primary bg-blue-50 px-2 py-1 rounded mr-3">Ch. ${index + 1}</span>
                            <span class="font-medium text-lg">${chapter.title}</span>
                        </div>
                        <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                    </div>
                    <div class="chapter-content mt-3 pl-8 border-l-2 border-gray-200">
                        ${renderChapterSummary(chapter.summary)}
                    </div>
                `;
                chaptersList.appendChild(chapterItem);
            });

            // Show book detail page
            homePage.classList.add('hidden');
            bookDetailPage.classList.remove('hidden');

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Render chapter summary (handles both string and array)
        function renderChapterSummary(summary) {
            if (Array.isArray(summary)) {
                return `
                    <ul class="list-disc pl-5 space-y-2 text-gray-700">
                        ${summary.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                `;
            }
            return `<p class="text-gray-700">${summary}</p>`;
        }

        // Toggle chapter visibility
        function toggleChapter(element) {
            const chapterContent = element.nextElementSibling;
            const icon = element.querySelector('i');

            chapterContent.classList.toggle('active');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        }

        // Show homepage
        function showHomePage() {
            // Update URL
            window.history.pushState(null, '', window.location.pathname);

            homePage.classList.remove('hidden');
            bookDetailPage.classList.add('hidden');

            // Clear search
            searchInput.value = '';
            filterSelect.value = 'all';
            renderBookList(bookData.books);
        }

        // Handle search
        function handleSearch() {
            const searchTerm = searchInput.value.toLowerCase();
            const filterValue = filterSelect.value;

            const filteredBooks = bookData.books.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.description.toLowerCase().includes(searchTerm);

                const matchesFilter = filterValue === 'all' || book.category === filterValue;

                return matchesSearch && matchesFilter;
            });

            renderBookList(filteredBooks);
        }

        // Handle filter
        function handleFilter() {
            handleSearch();
        }

        // Toggle dark mode
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');

            if (isDark) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                themeToggle.title = 'Switch to light mode';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                themeToggle.title = 'Switch to dark mode';
            }

            // Save preference
            localStorage.setItem('darkMode', isDark);
        }

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
    </script>
</body>

</html>